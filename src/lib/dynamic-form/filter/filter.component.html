<mat-accordion [hideToggle]="true">

  <mat-expansion-panel #filtersAccordion>

    <mat-expansion-panel-header>
      <mat-icon style="display:flex;align-self:center">filter_list</mat-icon>

      <mat-panel-title>
        <mat-chip-list>
          <mat-chip style="background-color: rgba(4, 91, 161, 0.02)"
                    (click)="filtersAccordion.toggle()">
            Filters
            <mat-icon matChipRemove
                      *ngIf="filterChipArray?.length > 0"
                      (click)="removeAllFilters()">cancel</mat-icon>
          </mat-chip>

          <mat-chip *ngFor="let filter of filterChipArray;let i = index"
                    matTooltipPosition="above"
                    [matTooltip]="filterMap[filter?.id] ? filterMap[filter?.id].fieldLabel : filter?.id"
                    [removable]="true" (removed)="removeFilter(i, filter?.id)">
            {{filter?.someLabel}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
        </mat-chip-list>
      </mat-panel-title>

    </mat-expansion-panel-header>

    <form [formGroup]="filter" class="row" *ngIf="filter">
      <div *ngFor="let filters of filtersArray">

        <div [ngSwitch]="filters?.inputType">

          <div *ngSwitchCase="'TEXT_INPUT'">
            <app-text [fg]="filter" [filter]="filters"
                      [filterChipArray]="filterChipArray"
                      [methods]="order[filters?.fieldName].methods"
                      (returnFilterChipArray)="_returnFilters($event)"></app-text>
          </div>

          <div *ngSwitchCase="'DECIMAL_INPUT' || 'INTEGER_INPUT'">
            <app-decimal [fg]="filter" [filter]="filters"
                         [filterChipArray]="filterChipArray"
                         (returnFilterChipArray)="_returnFilters($event)"></app-decimal>
          </div>

          <div *ngSwitchCase="'DATE_INPUT'">
            <app-date [fg]="filter" [filter]="filters"
                      [filterChipArray]="filterChipArray"
                      (returnFilterChipArray)="_returnFilters($event)"></app-date>
          </div>

          <div *ngSwitchCase="'DATE_INPUT_BETWEEN'">
            <app-date-between [fg]="filter" [filter]="filters"
                              [filterChipArray]="filterChipArray"
                              (returnFilterChipArray)="_returnFilters($event)"></app-date-between>
          </div>

          <div *ngSwitchCase="'COMBO_BOX'">
            <app-combo [fg]="filter" [filter]="filters"
                       [fieldDataPool]="fieldDataPool"
                       [filterChipArray]="filterChipArray"
                       [methods]="order[filters?.fieldName].methods"
                       (returnFilterChipArray)="_returnFilters($event)"></app-combo>
          </div>
        </div>
      </div>
    </form>
  </mat-expansion-panel>
</mat-accordion>
